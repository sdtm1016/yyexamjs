<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title>分类编码方案</title>
 	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<script type="text/javascript" src="../../js/jquery-1.7.2.js"></script>
<script type="text/javascript" src="../../js/publicFunction.js"></script>
	<style type="text/css">
		td{
			width:20px;
			border: 1px;
			border-top-color: #ffffff;
			border-left-color: #ffffff;
			border-right-color:#000000;
			border-bottom-color:#000000;
			border-style: solid;
			background-color: #ffffc0;
		}
		.tdbg{
			background-color: #e9e9d6;
		}
	</style>
	<script type="text/javascript" src="js/addgrade.js"></script>
</head>

 <body style="background-color: #d4d0c8;">
 	<div style="margin:0px;width:470px;height: 344;background-color: #d4d0c8;" title="分类编码方案">
 		
 			<table cellpadding="0" cellspacing="0" style="table-layout:fixed;font-size:12px;width:420px;height:270px;margin-top:10px;margin-left:10px;border: 1px;border-style: solid;border-color: #000000;">
 				<thead id="gradedef_header" style="display:none;word-break:break-all;">
	 				<tr>
	 					<td style="width:130px;background-color: #c0c0c0">项目</td>
	 					<td style="background-color: #c0c0c0">最大级数</td>
	 					<td style="background-color: #c0c0c0">最大长度</td>
	 					<td style="background-color: #c0c0c0">单级最大长度</td>
	 					<td style="background-color: #c0c0c0" flag="0">是否分类</td>
	 					<td style="background-color: #c0c0c0">第<br>1<br>级</td>
	 					<td style="background-color: #c0c0c0">第<br>2<br>级</td>
	 					<td style="background-color: #c0c0c0">第<br>3<br>级</td>
	 					<td style="background-color: #c0c0c0">第<br>4<br>级</td>
	 					<td style="background-color: #c0c0c0">第<br>5<br>级</td>
	 					<td style="background-color: #c0c0c0">第<br>6<br>级</td>
	 					<td style="background-color: #c0c0c0">第<br>7<br>级</td>
	 					<td style="background-color: #c0c0c0">第<br>8<br>级</td>
	 					<td style="background-color: #c0c0c0;border-right-color: #ffffff">第<br>9<br>级</td>
	 				</tr>
 				</thead>
 				<tbody id="gradedef">
 					
 				</tbody>
 			</table>
 		<div>
 			<span style="top:5px;color: blue;font-size: 14px;text-align: left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;说明：背景色为灰色的，用户不能调整</span>
 			<br>
 			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<label><img src="../../images/buttons/help.png" /></label>
 			&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<label><img src="../../images/buttons/confirm.png" onclick="doSave()"/></label>
 			&emsp;&emsp;<label><img src="../../images/buttons/no.png" onclick="doquxiao()" /></label>
 		</div>
 	</div>
 	<script type="text/javascript">
 		function doblur(temp){
 			var tempv=temp.value;
 			if(tempv==""){
 				if($(temp).parent().next().html() != ""){
 					$(temp).parent().html(tempValue);
 				}else{
 					$(temp).parent().html("");
 				}
 			}else{
 				//当前行数据
 				var tr = temp.parentNode.parentNode;
 				//当前下标
 				var currentIndex = temp.parentNode.cellIndex;
 				//最大级数
 				var lgrade = tr.cells[1].innerHTML;
 				//最大长度
 				var lgradelen = tr.cells[2].innerHTML;
 				//单级最大长度
 				var singlemaximum = tr.cells[3].innerHTML;
 				
 				//判断单级最大长度
 				if(parseInt(tempv) > parseInt(singlemaximum)){
 					$(temp).parent().html(tempValue);
 					jAlert("超过单级最大长度");
 					//置空input
 					//聚焦到input
 					return ;
 				}
 				//统计长度
 				var len = 0;
 				for(var i = 5 ; i < 14 ; i++){
 					//当当前下标 等于i时从input中取出值
 					if(i == currentIndex){
 						len = len + parseInt(tempv);
 					}else if(tr.cells[i].innerHTML != "" && parseInt(tr.cells[i].innerHTML) > 0){
 						len = len + parseInt(tr.cells[i].innerHTML);
 					}
 				}
 				//判断最大长度
 				if(len > lgradelen){
 					
 					jAlert("超出最大长度","提示信息",function(){
 						$(temp).parent().html(tempValue);
 					});

 					
 					//置空input
 					//需要聚焦到input框里
 				}
 				
 				$(temp).parent().html(tempv);
 			}
 		}
 		
 	</script>
 </body>
</html>
